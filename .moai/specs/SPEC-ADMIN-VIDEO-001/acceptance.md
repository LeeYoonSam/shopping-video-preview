---
id: SPEC-ADMIN-VIDEO-001
document_type: acceptance-criteria
version: "1.0.0"
created: "2025-12-23"
updated: "2025-12-23"
---

# SPEC-ADMIN-VIDEO-001: 인수 기준서

## TAG: SPEC-ADMIN-VIDEO-001

---

## 테스트 시나리오

### 시나리오 1: 대시보드 접근 및 실시간 모니터링

#### AC-001: 인증된 관리자 대시보드 접근

**Given (전제 조건):**
- 사용자가 관리자 권한을 가진 계정으로 로그인한 상태
- 비디오 생성 작업이 10개 이상 존재하는 상태

**When (실행 조건):**
- 사용자가 `/admin/video/dashboard` 경로로 접근

**Then (예상 결과):**
- 대시보드 페이지가 3초 이내에 로딩됨
- 작업 상태 요약 카드가 표시됨 (대기/처리중/완료/실패 각 건수)
- 최근 24시간 작업 추이 차트가 표시됨
- 스토리지 사용량 게이지가 표시됨

#### AC-002: 비인증 사용자 접근 차단

**Given (전제 조건):**
- 사용자가 로그인하지 않은 상태

**When (실행 조건):**
- 사용자가 `/admin/video/dashboard` 경로로 직접 접근 시도

**Then (예상 결과):**
- 로그인 페이지로 리다이렉트됨
- 원래 접근하려던 URL이 redirect 파라미터로 저장됨

#### AC-003: 실시간 모니터링 모드 활성화

**Given (전제 조건):**
- 관리자가 대시보드에 접속한 상태
- 실시간 모니터링 모드가 비활성화된 상태

**When (실행 조건):**
- 관리자가 "실시간 모니터링" 토글을 활성화

**Then (예상 결과):**
- 토글 상태가 활성화로 변경됨
- 작업 상태가 5초마다 자동 갱신됨
- 상태 변경 시 UI가 즉시 업데이트됨
- WebSocket 연결 상태 표시기가 "연결됨"으로 표시됨

---

### 시나리오 2: 작업 큐 관리

#### AC-004: 작업 목록 필터링

**Given (전제 조건):**
- 관리자가 작업 큐 페이지(`/admin/video/jobs`)에 접속한 상태
- 다양한 상태의 작업이 100개 이상 존재

**When (실행 조건):**
- 관리자가 상태 필터에서 "실패"를 선택
- 관리자가 날짜 범위를 "최근 7일"로 설정

**Then (예상 결과):**
- 테이블에 실패 상태의 작업만 표시됨
- 최근 7일 내의 작업만 필터링됨
- URL 쿼리 파라미터에 필터 조건이 반영됨
- 필터 초기화 버튼이 표시됨

#### AC-005: 작업 재시도

**Given (전제 조건):**
- 관리자가 작업 목록을 조회 중인 상태
- 실패한 작업이 1개 이상 존재

**When (실행 조건):**
- 관리자가 실패한 작업의 "재시도" 버튼을 클릭

**Then (예상 결과):**
- 확인 다이얼로그가 표시됨
- 확인 후 작업 상태가 "대기 중"으로 변경됨
- 성공 토스트 메시지가 표시됨
- 작업 목록이 자동으로 갱신됨

#### AC-006: 진행 중인 작업 취소

**Given (전제 조건):**
- 관리자가 작업 목록을 조회 중인 상태
- 처리 중인 작업이 1개 이상 존재

**When (실행 조건):**
- 관리자가 처리 중인 작업의 "취소" 버튼을 클릭

**Then (예상 결과):**
- 경고 확인 다이얼로그가 표시됨 ("진행 중인 작업을 취소하시겠습니까?")
- 확인 후 작업 상태가 "취소됨"으로 변경됨
- 관련 리소스가 정리됨
- 취소 사유 입력 옵션이 제공됨

#### AC-007: 일괄 작업 처리

**Given (전제 조건):**
- 관리자가 작업 목록에서 여러 작업을 선택한 상태
- 선택된 작업이 3개 이상

**When (실행 조건):**
- 관리자가 일괄 작업 메뉴에서 "선택 항목 재시도"를 선택

**Then (예상 결과):**
- 선택된 작업 수와 함께 확인 다이얼로그가 표시됨
- 확인 후 모든 선택된 작업이 재시도됨
- 각 작업의 결과(성공/실패)가 요약되어 표시됨
- 실패한 항목이 있을 경우 상세 정보 제공

---

### 시나리오 3: 비디오 관리

#### AC-008: 비디오 미리보기

**Given (전제 조건):**
- 관리자가 비디오 관리 페이지에 접속한 상태
- 상품에 연결된 비디오가 1개 이상 존재

**When (실행 조건):**
- 관리자가 비디오 카드의 "미리보기" 버튼을 클릭

**Then (예상 결과):**
- 비디오 플레이어 모달이 열림
- 비디오가 자동 재생됨
- 재생/일시정지, 볼륨, 전체화면 컨트롤이 제공됨
- ESC 키 또는 외부 클릭으로 모달 닫기 가능

#### AC-009: 수동 비디오 업로드

**Given (전제 조건):**
- 관리자가 비디오 업로드 페이지에 접속한 상태
- 업로드할 비디오 파일(MP4, 100MB 이하)이 준비됨

**When (실행 조건):**
- 관리자가 드롭존에 파일을 드래그 앤 드롭
- 관리자가 연결할 상품을 선택
- 관리자가 "업로드" 버튼을 클릭

**Then (예상 결과):**
- 업로드 진행률이 실시간으로 표시됨
- 업로드 완료 시 성공 메시지 표시
- 비디오가 선택된 상품에 연결됨
- 비디오 목록에 새 항목이 추가됨

#### AC-010: 비디오 교체

**Given (전제 조건):**
- 관리자가 특정 비디오의 상세 페이지에 있는 상태
- 교체할 새 비디오 파일이 준비됨

**When (실행 조건):**
- 관리자가 "비디오 교체" 버튼을 클릭
- 새 비디오 파일을 선택
- 확인 버튼을 클릭

**Then (예상 결과):**
- 기존 비디오가 보관됨 (soft delete)
- 새 비디오가 상품에 연결됨
- 교체 이력이 감사 로그에 기록됨
- 성공 메시지가 표시됨

#### AC-011: 비디오 삭제

**Given (전제 조건):**
- 관리자가 비디오 목록을 조회 중인 상태
- 삭제할 비디오가 특정 상품에 연결되어 있음

**When (실행 조건):**
- 관리자가 비디오의 "삭제" 버튼을 클릭

**Then (예상 결과):**
- 연관된 상품 목록이 포함된 경고 다이얼로그가 표시됨
- "이 비디오를 삭제하면 다음 상품에서 비디오가 제거됩니다: [상품 목록]"
- 확인 후 비디오가 soft delete 처리됨
- 연관 상품의 비디오 연결이 해제됨

---

### 시나리오 4: 모델 이미지 라이브러리 관리

#### AC-012: 모델 이미지 업로드

**Given (전제 조건):**
- 관리자가 모델 이미지 라이브러리 페이지에 접속한 상태
- 업로드할 이미지 파일(JPG/PNG, 5MB 이하)이 준비됨

**When (실행 조건):**
- 관리자가 "새 모델 추가" 버튼을 클릭
- 이미지 파일을 선택
- 모델 이름과 카테고리(남성/여성/중성)를 입력
- "저장" 버튼을 클릭

**Then (예상 결과):**
- 이미지 유효성 검증이 수행됨 (크기, 형식, 해상도)
- 썸네일이 자동 생성됨
- 모델이 선택된 카테고리에 추가됨
- 그리드에 새 모델 카드가 표시됨

#### AC-013: 기본 모델 설정

**Given (전제 조건):**
- 관리자가 특정 카테고리의 모델 목록을 조회 중인 상태
- 해당 카테고리에 모델이 2개 이상 존재

**When (실행 조건):**
- 관리자가 특정 모델의 "기본으로 설정" 버튼을 클릭

**Then (예상 결과):**
- 기존 기본 모델의 기본 상태가 해제됨
- 선택된 모델이 기본 모델로 설정됨
- 기본 모델에 "기본" 배지가 표시됨
- 변경 사항이 즉시 반영됨

#### AC-014: 기본 모델 삭제 방지

**Given (전제 조건):**
- 관리자가 모델 목록을 조회 중인 상태
- 삭제하려는 모델이 현재 기본 모델로 설정되어 있음

**When (실행 조건):**
- 관리자가 기본 모델의 "삭제" 버튼을 클릭

**Then (예상 결과):**
- "기본 모델은 삭제할 수 없습니다. 먼저 다른 모델을 기본으로 설정해주세요." 메시지가 표시됨
- 삭제가 진행되지 않음
- 다른 모델 선택 옵션이 제공됨

---

### 시나리오 5: 통계 및 분석

#### AC-015: 사용량 통계 조회

**Given (전제 조건):**
- 관리자가 분석 페이지에 접속한 상태
- 최근 30일간의 API 호출 데이터가 존재

**When (실행 조건):**
- 관리자가 기간을 "최근 30일"로 선택
- 관리자가 간격을 "일별"로 선택

**Then (예상 결과):**
- API 호출 추이 차트가 일별로 표시됨
- 총 호출 횟수, 평균 호출 횟수가 요약됨
- 전월 대비 증감률이 표시됨
- 차트 데이터 포인트에 호버 시 상세 정보 표시

#### AC-016: 리포트 다운로드

**Given (전제 조건):**
- 관리자가 분석 페이지에서 특정 기간을 선택한 상태

**When (실행 조건):**
- 관리자가 "리포트 다운로드" 버튼을 클릭
- 형식으로 "CSV"를 선택

**Then (예상 결과):**
- CSV 파일이 생성되어 다운로드됨
- 파일명에 기간 정보가 포함됨 (예: `report_2025-12-01_2025-12-23.csv`)
- 파일 내용에 선택된 기간의 모든 통계 데이터가 포함됨

---

### 시나리오 6: 설정 관리

#### AC-017: API 키 수정

**Given (전제 조건):**
- Super Admin 권한을 가진 관리자가 설정 페이지에 접속한 상태
- 기존 API 키가 설정되어 있음

**When (실행 조건):**
- 관리자가 API 설정 섹션에서 "수정" 버튼을 클릭
- 새 API 키를 입력
- "저장" 버튼을 클릭

**Then (예상 결과):**
- API 키가 마스킹되어 표시됨 (예: `sk-...xxxx`)
- 변경 전 확인 다이얼로그가 표시됨
- 저장 후 새 API 키가 암호화되어 저장됨
- 변경 이력이 감사 로그에 기록됨

#### AC-018: 알림 설정

**Given (전제 조건):**
- 관리자가 설정 페이지의 알림 섹션에 접속한 상태

**When (실행 조건):**
- 관리자가 "작업 완료 알림"을 활성화
- 이메일 주소를 입력
- 슬랙 웹훅 URL을 입력
- "테스트 알림 전송" 버튼을 클릭

**Then (예상 결과):**
- 입력된 이메일로 테스트 알림이 전송됨
- 입력된 슬랙 채널로 테스트 메시지가 전송됨
- 전송 결과(성공/실패)가 표시됨
- 설정이 저장됨

---

### 시나리오 7: 권한 테스트

#### AC-019: Operator 권한 제한

**Given (전제 조건):**
- Operator 역할의 사용자가 로그인한 상태

**When (실행 조건):**
- 사용자가 비디오 삭제를 시도
- 사용자가 모델 이미지 업로드를 시도
- 사용자가 API 설정 페이지에 접근 시도

**Then (예상 결과):**
- 비디오 삭제 버튼이 비활성화되거나 숨겨짐
- 모델 이미지 업로드 버튼이 비활성화되거나 숨겨짐
- API 설정 페이지 접근 시 403 Forbidden 또는 권한 없음 메시지 표시

#### AC-020: Viewer 권한 제한

**Given (전제 조건):**
- Viewer 역할의 사용자가 로그인한 상태

**When (실행 조건):**
- 사용자가 대시보드 조회
- 사용자가 작업 재시도를 시도
- 사용자가 리포트 다운로드를 시도

**Then (예상 결과):**
- 대시보드가 정상적으로 표시됨 (읽기 전용)
- 작업 재시도 버튼이 비활성화되거나 숨겨짐
- 리포트 다운로드 버튼이 비활성화되거나 숨겨짐

---

## 성능 기준 (Performance Criteria)

### 페이지 로딩 성능

| 페이지 | 목표 시간 | 측정 조건 |
|--------|----------|-----------|
| 대시보드 | 3초 이내 | 초기 로딩 (Cold Start) |
| 작업 목록 | 2초 이내 | 100개 항목, 페이지네이션 |
| 비디오 그리드 | 2초 이내 | 50개 썸네일 로딩 |
| 분석 차트 | 3초 이내 | 30일 데이터 렌더링 |

### API 응답 성능

| API | 목표 시간 | 측정 조건 |
|-----|----------|-----------|
| 작업 목록 조회 | 500ms 이내 | 100개 항목 |
| 작업 상태 변경 | 300ms 이내 | 단일 항목 |
| 파일 업로드 시작 | 1초 이내 | 업로드 세션 생성 |
| 통계 데이터 조회 | 1초 이내 | 30일 집계 데이터 |

### 실시간 업데이트 성능

| 항목 | 목표 | 조건 |
|------|------|------|
| 상태 갱신 지연 | 5초 이내 | WebSocket 연결 상태 |
| 재연결 시간 | 3초 이내 | 연결 끊김 후 복구 |
| 폴링 간격 | 5초 | 실시간 모드 활성화 시 |

---

## 품질 게이트 (Quality Gates)

### 코드 품질

- TypeScript 타입 커버리지: 90% 이상
- ESLint 오류: 0개
- 테스트 커버리지: 80% 이상

### 접근성 (Accessibility)

- WCAG 2.1 AA 레벨 준수
- 키보드 네비게이션 지원
- 스크린 리더 호환성

### 보안

- RBAC 권한 검증 테스트 통과
- XSS/CSRF 방어 테스트 통과
- API 키 암호화 저장 확인

---

## Definition of Done (완료 정의)

### 기능 완료 조건

- 모든 EARS 요구사항이 구현됨
- 모든 인수 테스트 시나리오가 통과함
- API 문서가 최신 상태로 유지됨
- 에러 처리 및 로딩 상태가 구현됨

### 기술 완료 조건

- 코드 리뷰 완료
- 단위 테스트 작성 및 통과
- E2E 테스트 작성 및 통과
- 성능 기준 충족

### 문서 완료 조건

- 사용자 가이드 작성
- API 문서 업데이트
- 변경 이력 기록

---

## 태그 (Traceability Tags)

- TAG: SPEC-ADMIN-VIDEO-001
- DOCUMENT: acceptance-criteria
- PHASE: planning
